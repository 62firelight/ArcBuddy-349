<div *ngIf="profile != undefined">

    <h2> {{ profile.displayName }} <img class="profile-icon" [src]="profile.iconPath"></h2>

    <mat-card-subtitle *ngIf="fetchingStats == false"> Last Updated: {{ profile.dateCreated | date : 'short'}}
    </mat-card-subtitle>

    <div class="row">
        <div class="column left">
            <h3> Characters </h3>
            <mat-spinner [diameter]="50" *ngIf="fetchingStats">
            </mat-spinner>
            <app-characters *ngIf="fetchingStats == false" [characters]="profile.characters" [currentId]="currentId"
                (newCharacterIdEvent)="updateStats($event)">
            </app-characters>
        </div>

        <div class="column right">
            <h3> Stats </h3>

            <mat-button-toggle-group *ngIf="fetchingStats == false" [(ngModel)]="currentMode"
                (change)="displayedStats=getMode(currentMode)">
                <mat-button-toggle value="Merged">All</mat-button-toggle>
                <mat-button-toggle value="PvE">PvE</mat-button-toggle>
                <mat-button-toggle value="PvP">PvP</mat-button-toggle>
            </mat-button-toggle-group>
            <br>
            <br>

            <button mat-raised-button [disabled]="profile.mergedStats == undefined" (click)="addProfile(profile)">
                Save Stats
            </button>

            <mat-spinner [diameter]="50" *ngIf="fetchingStats">
            </mat-spinner>

            <div *ngIf="fetchingStats == false && 
                    checkEmptyObject(displayedStats)">
                <br>
                <br>
                No {{ currentMode }} stats were found
            </div>

            <div class="stat-section" *ngIf="fetchingStats == false && checkEmptyObject(displayedStats) == false">
                <app-stat-section *ngFor="let section of sections | keyvalue: helper.numberedKeyOrder" [section]="section.value"
                    [sectionName]="section.key" [displayedStats]="displayedStats"
                    [newDisplayedStatsEvent]="newDisplayedStatsEvent">
                </app-stat-section>
            </div>
        </div>
    </div>
</div>
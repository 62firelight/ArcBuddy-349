<div class="stat-container">

    <div class="in-progress" *ngIf="fetchingStats">
        <mat-spinner [diameter]="50">
        </mat-spinner>
        Fetching stats...
    </div>

    <div *ngIf="profile != undefined && fetchingStats == false">

        <h1> {{ profile.displayName }} <img class="profile-icon" [src]="profile.iconPath"></h1>

        <mat-card-subtitle> Last Updated: {{ profile.dateCreated | date : 'short'}}
        </mat-card-subtitle>

        <!-- <button mat-raised-button [disabled]="profile.mergedStats == undefined" (click)="addProfile(profile)">
            Save
        </button> -->

        <div class="row">
            <div class="column left">
                <h2>Filters</h2>
                <mat-chip-list>
                    <mat-chip (click)="displayedStats=getMode('Merged')" color="accent"
                        [selected]="currentMode == 'Merged'">All</mat-chip>
                    <mat-chip (click)="displayedStats=getMode('PvE')" color="accent" [selected]="currentMode == 'PvE'">
                        PvE</mat-chip>
                    <mat-chip (click)="displayedStats=getMode('PvP')" color="accent" [selected]="currentMode == 'PvP'">
                        PvP</mat-chip>
                </mat-chip-list>
                <app-characters [characters]="profile.characters" [currentId]="currentId"
                    (newCharacterIdEvent)="updateStats($event)">
                </app-characters>
            </div>

            <div class="column right">
                <div *ngIf="checkEmptyObject(displayedStats) == true">
                    <br>
                    <br>
                    No {{ currentMode }} stats were found
                </div>

                <div class="stat-section" *ngIf="checkEmptyObject(displayedStats) == false">
                    <app-stat-section *ngFor="let section of sections | keyvalue: helper.numberedKeyOrder"
                        [section]="section.value" [sectionName]="section.key" [displayedStats]="displayedStats"
                        [newDisplayedStatsEvent]="newDisplayedStatsEvent">
                    </app-stat-section>
                </div>
            </div>
        </div>
    </div>
</div>